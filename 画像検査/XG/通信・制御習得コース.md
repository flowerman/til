## 通信・制御習得コース

パラレルIO　総合判定 

### 総合判定出力「%JAHold」の動作
総合判定出⼒「%JAHold」には「STO同期（初期設定値）」「ワンショット」「ホールド」の3種類の出⼒形態が存在します。ここではそれぞれの動作と設定⽅法を解説します。

それぞれの出⼒形態の違い
- STO同期 ： 端⼦出⼒ユニットの出⼒時に%Stoと同期してON/OFFします。
- ワンショット ： 「ワンショット時間（ms）」で設定した時間だけONになり、その後OFFになります。
- ホールド ： 総合判定NG発⽣後、NG状態を保持します（リセット・設定No.切換・出⼒禁⽌時に保持解除）。

####「STO同期」の設定⽅法と動作  
①フローの最後に「端⼦出⼒ユニット」を追加します。  
これにより%Stoが端⼦出⼒ユニット実⾏時に出⼒されます。  
※追加するだけで、特に設定は必要ありません。

②XG VisionEditorの【設定】>【環境設定】から「環境設定」画⾯を開き、【⼊出
⼒】>【外部端⼦】>【出⼒時間】を選択します。  

③「ホールド制御」で「STO同期」を選択します。  
端⼦出⼒ユニット実⾏時OUT22（%Sto）が⽴ち上がりますので、それと同期してOUT23（%JAHold）のON/OFF状態を確認します。  
%Stoの出⼒時間（下図内A/B/C）は環境設定で変更できますので、接続先PLCが認識できる時間に調整してください。  

####「ワンショット」の設定⽅法と動作  
①XG VisionEditorの【設定】>【環境設定】から「環境設定」画⾯を開き、【⼊出⼒】>【外部端⼦】>【出⼒時間】を選択します。  

②「ホールド制御」で「ワンショット」を選択し、「ワンショット時間（ms）」を
設定します。  
- フロー結果がNGのとき、フロー終了のタイミングで%JAHoldがONになります。
- ワンショット時間で指定された時間だけNG状態を保持してから、NG状態を解放します。
- %Test⼊⼒をOFF→ONすると%JAHoldはOFFになり、次のフロー終了のタイミングで状態が更新されます。%Test⼊⼒以外にも、リセットや検査設定切り換え、運転/停⽌切り換え、OEコマンドによる出⼒禁⽌、ニット編集/フロー編集の出⼒禁⽌によって、%JAHoldはOFFになります。
- 検査設定のバージョンが2.1形式以下の場合は、ホールド制御の設定に関わらず「ホールド」の挙動となります。

####「ホールド」の設定⽅法と動作  
①XG VisionEditorの【設定】>【環境設定】から「環境設定」画⾯を開き、【⼊出⼒】>【外部端⼦】>【出⼒時間】を選択します。  
②「ホールド制御」で「ホールド」を選択します。  
- n-1回⽬のフロー実⾏結果がNGのとき、フロー終了のタイミングで%JAHoldがONになります。
- 前回の結果がNGであった場合は、以降のフローの実⾏結果に関わらず%JAHoldはONのままになります。
- %Test⼊⼒をOFF→ONすると%JAHoldはOFFになり、次のフロー終了のタイミングで状態が更新されます%Test⼊⼒以外にも、リセットや検査設定切り換え、運転/停⽌切り換え、OEコマンドによる出⼒禁⽌、ニット編集/フロー編集の出⼒禁⽌によって、%JAHoldはOFFになります。
 - 検査設定のバージョンが2.1形式以下の場合は、ホールド制御の設定に関わらず「ホールド」の挙動となります。  


####「OK」を選択して「環境設定」画⾯を閉じ、環境設定ファイルをコントローラへアップロードします。

---

パラレルIO　ユニット個別判定

### ユニット個別判定を出⼒する（パラレルI/O）

### 出⼒するユニット判定値を設定する（端⼦出⼒ユニット）
ユニット個別の判定値を出⼒するために「**端⼦出⼒ユニット**」を使⽤します。ここでは端⼦出⼒ユニットユニット個別の判定値を割り付ける⽅法を解説します（解説では右の参考フローのU0004：エ〜U0008：エリアまでの5個のユニットのOK/NGを出⼒）。

#### フローの最後に「端⼦出⼒ユニット」を追加します。
追加と同時に「端⼦出⼒ユニット」が開きます。

#### 「環境設定読み込み」ボタンを押して、出⼒変数を読み込みます。
「環境設定読み込み」ボタンを押して表⽰されるメッセージで「OK」を選択すると、環境設定で定義されている出⼒変数（%OutDataA〜H）が読み込まれます。

#### 「1回⽬データ」欄に各ユニットのユニット判定値（UJG）をパーツリストからドラッグアンドドロップして割り付けます。
判定を出⼒したいユニットの「RSLT結果データ」の中にある「UJG ユニット判定値」をドラッグアンドドロップします。パーツリストからのドラッグアンドドロップ以外に、直接⼊⼒も可能です。その際はオートコンプリート機能が便利です（詳細下記参照）。

#### 必要に応じて「2回⽬データ」以降を⼊⼒し、「出⼒回数」を設定します。
17個以上のユニット判定値の出⼒が必要な場合、複数回に分けて同じ端⼦から出⼒することになります。その場合、「2回⽬データ」以降に⼊⼒をおこないます。

### 端⼦データ出⼒「%OutDataA〜H」の動作
端⼦出⼒ユニット実⾏時OUT22（%Sto）が⽴ち上がりますので、それと同期してOUT6〜21のON/OFF状態を確認します。%Stoの出⼒時間（下図内A/B/C）は環境設定で変更できますので、接続先PLCが認識できる時間に調整しください。

### 検査設定ファイル、環境設定ファイルをコントローラへアップロードします。

---

パラレルIO　コントローラの制御  

---

Ethernet PLCリンク編

リンクの確立

出力データの設定  
計測値、判定値を出力するために　結果出力ユニット　を使用する。  
これに対して、任意の　ユニット計測器。判定値を割り付ける。  
DMアドレスを確認する  



