
## 外観検査習得コース

### 傷サイズに最適な設定をする（6級「傷」ユニット）
#### 標準設定（微調整項目）

セグメントサイズの最適化  
計測領域内をスキャンする **セグメント** のサイズを検出したい汚れ・異物・欠陥と **同程度の大きさ** に設定します。これは処理時間と計測結果のバランスがもっとも良くなる傾向があるからで、そのサイズを基準として安定度画面を見ながら最適なセグメントサイズを調整します。  

傷レベルの調整  
設定Noを 0001:傷レベル に設定する。  
**傷レベル**  は検出したい汚れ・異物・欠陥の「濃さ」を定義する値で、検出対象と背景の切り分けなどに有効です。安定度画面を見ながら検出対象のみが表示されるように調整します。

---

### ワーク端面の影響をキャンセル（5級「傷」ユニット）
ワーク端面の影響をキャンセルする <検出方向>

安定度画面で現状確認  
ビジョンウィンドウの【種別】ダイアログより「安定度画像」を選択し、表示を「安定度画面」に切り
換えます。  
計測領域内を「XY」でスキャンしているため背景とワーク端面の境界における濃淡差を「傷・汚れ」として認識しています。（四角いワーク上辺の欠けの場合 Xを設定）

検出方向の変更  
傷ユニットの【検出条件】タブを選択し、メニュー内の【検出方向】を「XY」から「X」に変更します。

検出状態をモニターする  
端面境界がキャンセルされ、傷のみが検出できていることを確認します。

---

### 細長い欠陥のみを検出する（4級「傷」ユニット）
#### 方向性を持つ欠陥のみを抽出する <方向別設定>  

安定度画面で現状確認  
線傷と同様の濃淡差をもつ背景ノイズが多く存在し、線傷と背景の差が傷レベルの調整のみでは出てきません。

方向別を設定  
傷ユニットの【検出条件】タブを選択し、メニュー内の【方向別設定】を「OFF」から「ON」に変更します。  
【設定方向】が「X/Y共通」固定から「X」「Y」個別になりますので、線傷に合わせた形状のセグメントサイズに調整します。（例：縦傷であればYの設定値の方が大きい、横傷はその逆）

検出状態をモニターする
安定度画面で、背景ノイズがキャンセルされ、線傷のみが検出できていることを確認します。

---

### 薄いシミ汚れを検出する（3級「傷」ユニット）
#### シミのような変化の少ない汚れを検出する（比較間隔設定）
**※シミ汚れは徐々に濃淡差が変化しており、周囲との比較では変化量が少なく汚れとして検出することが難しいケースです。**  

比較間隔設定をおこなう  
傷ユニットの【検出条件】タブを選択し、メニュー内の【比較間隔設定】を「オート」から「マニュアル」に変更します。グレーアウトしていた【移動量】【比較セグメント間隔】（設定パラメータ）がアクティブになりますので、**周囲ではなく遠方との比較** をおこなうように調整します。

検出状態をモニターする  
遠方比較により注目セグメントとの変化量が増大し、検出できていることを確認します。

---

### 様々な条件で傷を判別する（2級「傷」ユニット）
#### 傷・汚れの有無だけでなく個数もチェックする （グルーピング）

安定度画面で現状確認  
汚れは問題なく検出できていますが、汚れの総量で判定しており、「3個以上の汚れがあればNGにしたい」「汚れの個数を外部に出力したい」といったニーズに対応できません。  

グルーピングを行う  
傷ユニットの【検出条件】タブを選択し、メニュー内の【グルーピング】を「OFF」から「ON」に変更します。グルーピング関連の設定項目がアクティブになるので、【検出個数】にカウントする上限数を、【傷量下限】にどのくらいの大きさからカウント対象とするかを入力します。  

検出状態をモニターする  
それぞれの汚れに+マークがつき、個数のカウントをおこなっていることを確認します。  

#### 線状傷（クラックなど）のみを検知対象とする（グルーピングフィルタ設定）

安定度画面で現状確認  
計測領域内に線状傷以外の丸模様などがありますが、すべての濃淡変化を傷グループとして検知しています。
応用設定②を適用しても、線状傷の方向性が一定ではないため安定した検知ができません。  

フィルタ設定  
傷ユニットの【検出条件】タブを選択し、グルーピング項目の【フィルタ設定ボタン】をクリックします。【針状度】を「有効」にして、下限を「2.000」に設定します。  
**針状度とは？** 主軸と平行になる外接矩形を求め、その主軸長を副軸長で割ったもの。  
※細長いものほど大きな値になります。  

検出状態をモニター  
検出グループの中で、細長いもののみが検知されていることを確認します。  

---

### 背景の光沢ムラをカットする（2級「傷」ユニット）

安定度画面で現状確認  
明/暗それぞれの汚れがありますが、背景にある外乱光による光沢むらに反応してしまい、どちらも検出できていません。  

前処理  
傷ユニットの【前処理】タブを選択し、フィルタ種別で【リアルタイム濃淡補正】を選択後、「詳細」ボタンにて前処理詳細設定をおこないます。  
【補正方法】シェーディング補正  
【抽出サイズ】16pixel  
【抽出色】明暗  
【ゲイン】5.0倍  
【ノイズ除去】10.0階調  

検出状態をモニター
背景の光沢むらをキャンセルして明/暗それぞれの汚れのみが検出できていることを確認します。  


